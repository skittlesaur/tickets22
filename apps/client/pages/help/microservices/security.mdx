import HelpLayout from '@layouts/help'
import Endpoint from '@components/help/endpoint'
import ApiTOC from '@components/help/api-toc'
import { SECURITY_SERVICE_URL } from '@services/constants'

# Security Microservice

The security microservice is responsible for protecting against fraud and malicious attacks. It's also used for user
authentication and authorization, and user specific endpoints.

## Public API

<ApiTOC
  toc={[
    {
      title: 'User',
      endpoints: [
        { title: 'Get user profile', path: '/me' },
        { title: 'Get user tickets', path: '/me/tickets' },
      ]
    },
  ]}
/>

<Endpoint
  baseUrl={SECURITY_SERVICE_URL}
  title="Get your user profile"
  path="/me"
  method="GET"
  requiresToken
  responses={{
  200: [
    {
      description: 'The request was successful and information about the user is returned.',
      res: `{
  "id": "clb2egklg0000s66qteo2x8dj",
  "name": "Baraa",
  "email": "hey.baraa@gmail.com",
  "phone": null
}`
    }
  ],
  400: [
    {
      description: 'The access token was not provided in the request, thus the request has failed.',
      res: `{
  "status": 400,
  "code": "Bad Request",
  "message": "Token was not supplied"
}`
    }
  ],
  401: [
    {
      description: 'The JSON Web Token has failed the verification, either due to a token not generated by Tickets22 or the token has expired.',
      res: `{
  "status": 401,
  "code": "Unauthorized",
  "message": "Token verification failure, the token may have expired"
}`
    },
    {
      description: 'The user id provided in the JSON verification token was invalid and does not exist anymore',
      res: `{
  "status": 401,
  "code": "Unauthorized",
  "message": "Invalid user id in the token"
}`
    }
  ],
  500: [
      {
        description: 'An internal  server error has occurred. If you receive such an error please try again or report it to one of the developers.',
        res: `{
  "status": 500,
  "code": "Internal Server Error",
  "message": "Something went wrong"
}`
      }
    ]
  }}
/>

<Endpoint
  baseUrl={SECURITY_SERVICE_URL}
  title="Get user purchased tickets"
  path="/me/tickets"
  method="GET"
  requiresToken
  responses={{
}}
/>

export default ({ children }) => (
  <HelpLayout
    title="Security Microservice"
  >
    {children}
  </HelpLayout>
)